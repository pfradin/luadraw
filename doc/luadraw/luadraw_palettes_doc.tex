\documentclass[10pt,a4paper,twocolumn]{article}%
\usepackage{fouriernc}
\usepackage[svgnames]{xcolor}
\usepackage{luadraw}
\usepackage[margin=1.5cm,headheight=15pt]{geometry}
\title{The \emph{luadraw\_palette} extension}
\date{}
\begin{document}
\maketitle{}


\begin{luacode*}
require 'luadraw_palettes'

function Dpalette(pal,name)
    local g = graph:new{window={-5,5,-5,5},bbox=false, border=false}
    g:Linewidth(1)
    local A, h, dh, L, N = Z(-5,4), Z(0,-1), Z(0,-1.1), 5, 100
    local dl = L/N
    for k = 1, N do
        local color = palette(pal,(k-1)/(N-1))
        g:Drectangle(A,A+h,A+h+dl,"color="..color..",fill="..color)
        A = A+dl
    end
    g:Drectangle(A,A+h,A+h-L); g:Dlabel(name,A+h/2,{pos="E"})
    g:Sendtotex()
    tex.sprint("\\par\\vspace{1mm}")
end

local names = {}
for key,val in pairs(getPal) do -- on extrait les noms
    table.insert(names,key)
end

table.sort(names) -- ordre alphab√©tique

for _,nom in ipairs(names) do
    Dpalette(getPal[nom],nom)
end
\end{luacode*}


\end{document} 
